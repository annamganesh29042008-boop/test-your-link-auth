<!DOCTYPE html>
<html lang=\"en\">
<head>
<meta charset=\"utf-8\">
<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">
<title>Sign up â€” TEST YOUR LINK</title>
<link rel=\"icon\" href=\"data:,\">
<style>
  body{font-family:Arial, system-ui; background:#f4f6fb; margin:0;}
  .wrap{max-width:420px; margin:48px auto; background:#fff; padding:24px; border-radius:12px; box-shadow:0 10px 30px rgba(0,0,0,.06)}
  h1{margin:0 0 6px}
  .muted{color:#667085; font-size:13px; margin-bottom:16px}
  input{width:100%; padding:12px; border:1px solid #e4e7ec; border-radius:10px; margin:8px 0; font-size:14px}
  button{width:100%; padding:12px; border:0; border-radius:10px; background:#111827; color:#fff; cursor:pointer; font-weight:600}
  .link{display:block; text-align:center; margin-top:10px; color:#111827; text-decoration:none}
  .err{background:#ffe6e6; color:#7a0c0c; border:1px solid #f2caca; padding:10px; border-radius:8px; font-size:13px; display:none; margin:6px 0}
  .ok{background:#e6ffed; color:#0b5b2a; border:1px solid #baf0c6; padding:10px; border-radius:8px; font-size:13px; display:none; margin:6px 0}
</style>
</head>
<body>
<div class=\"wrap\">
  <h1>Create account</h1>
  <div class=\"muted\">Use your email and a strong password.</div>
  <div id=\"msgErr\" class=\"err\"></div>
  <div id=\"msgOk\" class=\"ok\"></div>
  <input id=\"email\" type=\"email\" placeholder=\"Email\" autocomplete=\"email\">
  <input id=\"pass\" type=\"password\" placeholder=\"Password (min 8 chars)\" autocomplete=\"new-password\">
  <input id=\"pass2\" type=\"password\" placeholder=\"Confirm password\" autocomplete=\"new-password\">
  <button id=\"signupBtn\">Create account</button>
  <a class=\"link\" href=\"login.html\">Already have an account? Log in</a>
</div>

<script src=\"https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js\"></script>
<script src=\"https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js\"></script>
<script src=\"firebase.js\"></script>
<script>
const emailEl = document.getElementById('email');
const passEl = document.getElementById('pass');
const pass2El = document.getElementById('pass2');
const btn = document.getElementById('signupBtn');
const msgErr = document.getElementById('msgErr');
const msgOk = document.getElementById('msgOk');

function showErr(t){ msgErr.textContent=t; msgErr.style.display='block'; msgOk.style.display='none'; }
function showOk(t){ msgOk.textContent=t; msgOk.style.display='block'; msgErr.style.display='none'; }

btn.onclick = async () => {
  const email = emailEl.value.trim();
  const pass = passEl.value;
  const pass2 = pass2El.value;
  if(!email){ return showErr('Enter email'); }
  if(pass.length < 8){ return showErr('Password must be at least 8 characters'); }
  if(pass !== pass2){ return showErr('Passwords do not match'); }
  try{
    await window.firebaseAuth.createUserWithEmailAndPassword(email, pass);
    showOk('Account created! Redirecting to home...');
    setTimeout(()=>{ window.location.href='home.html'; }, 700);
  }catch(e){
    console.error(e);
    let m = e.message || String(e);
    if(e.code === 'auth/email-already-in-use'){ m = 'This email already has an account. Try logging in.'; }
    showErr(m);
  }
};
</script>
</body>
</html>
